{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "DSDS Companion Configuration",
  "description": "Schema for DSDS AI companion personalities and configurations",
  "type": "object",
  "required": ["id", "name", "role", "version"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique identifier for the companion (lowercase, no spaces)",
      "pattern": "^[a-z0-9_-]+$"
    },
    "name": {
      "type": "string",
      "description": "Display name of the companion"
    },
    "role": {
      "type": "string",
      "description": "Primary role or title of the companion",
      "examples": ["AI Co-Host", "Creative Assistant", "Research Partner"]
    },
    "version": {
      "type": "string",
      "description": "Companion configuration version",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "description": {
      "type": "string",
      "description": "Brief description of the companion's personality and purpose"
    },
    "avatar": {
      "type": "string",
      "description": "Path to avatar image (relative to companions directory)"
    },
    "voice": {
      "type": "object",
      "description": "Voice configuration for the companion",
      "properties": {
        "provider": {
          "type": "string",
          "enum": ["gemini", "coqui", "edge_tts", "piper"],
          "description": "TTS provider to use"
        },
        "voiceId": {
          "type": "string",
          "description": "Voice identifier for the selected provider"
        },
        "pitch": {
          "type": "number",
          "minimum": -20,
          "maximum": 20,
          "description": "Voice pitch adjustment (-20 to +20)"
        },
        "speed": {
          "type": "number",
          "minimum": 0.5,
          "maximum": 2.0,
          "description": "Speech rate (0.5 = slow, 2.0 = fast)"
        }
      }
    },
    "llm": {
      "type": "object",
      "description": "LLM configuration for the companion",
      "properties": {
        "provider": {
          "type": "string",
          "enum": ["gemini", "anthropic", "ollama", "gpt4all", "lmstudio"],
          "description": "LLM provider to use"
        },
        "model": {
          "type": "string",
          "description": "Model identifier for the selected provider"
        },
        "temperature": {
          "type": "number",
          "minimum": 0,
          "maximum": 2,
          "description": "Response creativity (0 = focused, 2 = creative)"
        },
        "maxTokens": {
          "type": "number",
          "description": "Maximum response length in tokens"
        }
      }
    },
    "personality": {
      "type": "object",
      "description": "Personality traits and behavioral parameters",
      "properties": {
        "systemPrompt": {
          "type": "string",
          "description": "Core system instruction defining the companion's personality"
        },
        "traits": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "List of personality traits",
          "examples": [["warm", "supportive", "curious", "thoughtful"]]
        },
        "conversationStyle": {
          "type": "string",
          "enum": ["formal", "casual", "friendly", "professional", "playful"],
          "description": "Overall conversation style"
        },
        "responseLength": {
          "type": "string",
          "enum": ["brief", "moderate", "detailed"],
          "description": "Preferred response length"
        },
        "interruptionBehavior": {
          "type": "string",
          "enum": ["passive", "balanced", "active"],
          "description": "How actively the companion participates in conversations"
        }
      }
    },
    "memory": {
      "type": "object",
      "description": "Memory and context configuration",
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Whether to maintain conversation memory"
        },
        "vaultPath": {
          "type": "string",
          "description": "Path to memory vault (relative to sovereign_library)"
        },
        "contextWindow": {
          "type": "number",
          "description": "Number of recent interactions to remember"
        }
      }
    },
    "capabilities": {
      "type": "object",
      "description": "Enabled capabilities and features",
      "properties": {
        "podcast": {
          "type": "boolean",
          "description": "Can participate in podcast recordings"
        },
        "transcription": {
          "type": "boolean",
          "description": "Can review and edit transcriptions"
        },
        "writing": {
          "type": "boolean",
          "description": "Can assist with writing and publishing"
        },
        "research": {
          "type": "boolean",
          "description": "Can help with research and document analysis"
        }
      }
    },
    "metadata": {
      "type": "object",
      "description": "Additional metadata",
      "properties": {
        "author": {
          "type": "string",
          "description": "Creator of this companion configuration"
        },
        "created": {
          "type": "string",
          "format": "date-time",
          "description": "Creation timestamp"
        },
        "updated": {
          "type": "string",
          "format": "date-time",
          "description": "Last update timestamp"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Tags for categorization"
        }
      }
    }
  }
}
